(this["webpackJsonptime-tracker"]=this["webpackJsonptime-tracker"]||[]).push([[0],{107:function(e,t,s){"use strict";s.r(t);var n=s(12),c=s(1),o=s.n(c),a=s(57),r=s.n(a),i=(s(68),s(5)),l=s(9),j=s(26),u=s(27),d=s(7),b=s.n(d),h=new(function(){function e(){Object(j.a)(this,e),this.authenthicated=!!b.a.get("authenthicated")}return Object(u.a)(e,[{key:"login",value:function(e){b.a.set("authenthicated",!0),this.authenthicated=!0,e()}},{key:"logout",value:function(e){b.a.set("authenthicated",!1),this.authenthicated=!1,e()}},{key:"isAuthenticated",value:function(e){return b.a.get("authenthicated")}}]),e}()),O=s(18),m=s.n(O),x=s(2);var g=function(e){var t=e.sessions,s=(e.setSessions,e.getSesions),n=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},c=function(e){var t=new Date(null);return t.setSeconds(parseInt(e/1e3)),t.toISOString().substr(11,8)};return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{className:"sessions",children:"Sessions"}),Object(x.jsx)("button",{className:"filter",name:"",onClick:s,children:"All"}),Object(x.jsx)("button",{className:"filter",name:"month",onClick:s,children:"This month"}),Object(x.jsx)("button",{className:"filter",name:"week",onClick:s,children:"This week"}),Object(x.jsx)("button",{className:"filter",name:"day",onClick:s,children:"Today"}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{className:"table-header",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"ID"}),Object(x.jsx)("th",{children:"Title"}),Object(x.jsx)("th",{children:"Description"}),Object(x.jsx)("th",{children:"Start"}),Object(x.jsx)("th",{children:"End"}),Object(x.jsx)("th",{children:"Duration"}),Object(x.jsx)("th",{children:"Created At"})]})}),Object(x.jsx)("tbody",{children:t.map((function(e){return Object(x.jsxs)("tr",{className:"table-row",children:[Object(x.jsx)("td",{children:e.id}),Object(x.jsx)("td",{children:e.title}),Object(x.jsx)("td",{children:e.description}),Object(x.jsx)("td",{children:n(e.start)}),Object(x.jsx)("td",{children:n(e.end)}),Object(x.jsx)("td",{children:c(e.duration)}),Object(x.jsx)("td",{children:n(e.Ts)})]},e.id)}))})]})]})},p=s(29),f=s.n(p),v="https://trackerr-app.herokuapp.com/graphql";var k=function(e){var t=e.getSesions,s=Object(c.useState)(""),n=Object(l.a)(s,2),a=n[0],r=n[1],i=Object(c.useState)(""),j=Object(l.a)(i,2),u=j[0],d=j[1],h=Object(c.useState)(""),O=Object(l.a)(h,2),g=O[0],p=O[1],k=Object(c.useState)(""),T=Object(l.a)(k,2),S=T[0],y=T[1],N=Object(c.useState)(""),w=Object(l.a)(N,2),A=w[0],C=w[1];Object(c.useEffect)((function(){a&&D()}),[a]);var D=function(){console.log(a,S,A,u,g);var e,s={query:(e={currentTime:a,startTime:S,stopTime:A,title:u,description:g},"mutation { saveSession( input: { start: ".concat(e.startTime,", end: ").concat(e.stopTime,", duration: ").concat(parseInt(e.currentTime),', title: "').concat(e.title,'", description: "').concat(e.description,'"} ) {  success  message } }'))};console.log(s);var n={headers:{Authorization:"Bearer ".concat(b.a.get("token"))}};m.a.post(v,s,n).then((function(e){if(e.data.errors){var s=e.data.errors[0],n=s.message,c=s.extensions,o=c.code,a=c.errorType;return console.log({message:n}),console.log({code:o}),void console.log({errorType:a})}d(""),p(""),r(""),console.log({response:e}),t()})).catch((function(e){console.log({error:e})}))};return Object(x.jsxs)("div",{className:"timer",children:[Object(x.jsx)("p",{children:" Start a timed session"}),Object(x.jsx)("br",{}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("label",{children:["Title",Object(x.jsx)("input",{value:u,onChange:function(e){return d(e.target.value)},name:"Title"})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("label",{children:["Description",Object(x.jsx)("input",{value:g,onChange:function(e){return p(e.target.value)},name:"Description"})]}),Object(x.jsx)("br",{})]}),Object(x.jsx)(f.a,{initialTime:0,startImmediately:!1,onStart:function(){return console.log("onStart hook")},onResume:function(){return console.log("onResume hook")},onPause:function(){return console.log("onPause hook")},onStop:function(){console.log("current time",a)},onReset:function(){return console.log("onReset hook")},children:function(e){var t=e.start,s=e.resume,n=e.pause,c=e.stop,a=e.reset,i=e.getTimerState,l=e.getTime;return Object(x.jsxs)(o.a.Fragment,{children:[Object(x.jsxs)("div",{className:"timer-values",children:[Object(x.jsxs)("div",{className:"timer-box",children:[Object(x.jsx)("p",{children:Object(x.jsx)(f.a.Days,{})}),Object(x.jsx)("p",{children:"days"})]}),Object(x.jsxs)("div",{className:"timer-box",children:[Object(x.jsx)("p",{children:Object(x.jsx)(f.a.Hours,{})}),Object(x.jsx)("p",{children:"hours"})]}),Object(x.jsxs)("div",{className:"timer-box",children:[Object(x.jsx)("p",{children:Object(x.jsx)(f.a.Minutes,{})}),Object(x.jsx)("p",{children:"minutes"})]}),Object(x.jsxs)("div",{className:"timer-box",children:[Object(x.jsx)("p",{children:Object(x.jsx)(f.a.Seconds,{})}),Object(x.jsx)("p",{children:"seconds"})]})]}),Object(x.jsx)("div",{children:"INITED"===i()?"":i()}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{name:"start",className:"btn",onClick:function(){var e=(new Date).getTime();y(e),t()},children:"Start"}),Object(x.jsx)("button",{className:"btn",onClick:n,children:"Pause"}),Object(x.jsx)("button",{className:"btn",onClick:s,children:"Resume"}),Object(x.jsx)("button",{className:"btn",onClick:function(){var e=l(),t=(new Date).getTime();C(t),r(e),a(),c()},children:"Save"}),Object(x.jsx)("button",{className:"btn",onClick:a,children:"Reset"})]})]})}})]})};var T=function(e){console.log("Auth:",h.isAuthenticated()),console.log(b.a.get("user"));var t=b.a.get("user"),s=Object(c.useState)([]),n=Object(l.a)(s,2),o=n[0],a=n[1],r=function(e){console.log(e);var t="";e&&(console.log("get sessions...",e.target.name),t="filter: "+e.target.name),console.log("token",b.a.get("token"));var s={query:function(e){return"query { sessions(".concat(e,") {   id Ts title description start end Ts duration } }")}(t)};console.log(s);var n={headers:{Authorization:"Bearer ".concat(b.a.get("token"))}};m.a.post(v,s,n).then((function(e){if(e.data.errors){var t=e.data.errors[0],s=t.message,n=t.extensions,c=n.code,o=n.errorType;console.log({message:s}),console.log({code:c}),console.log({errorType:o})}console.log({response:e}),a(e.data.data.sessions)})).catch((function(e){console.log({error:e})}))};return Object(c.useEffect)(r,[]),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)("button",{onClick:function(){h.logout((function(){return e.history.push("/")}))},children:"logout"}),Object(x.jsxs)("p",{className:"",children:["Welcome ",t.name," "]})]}),Object(x.jsx)(k,{getSesions:r}),Object(x.jsx)(g,{sessions:o,setSessions:a,getSesions:r})]})},S=s(20),y=s(35);var N=function(e){console.log("Auth:",h.isAuthenticated());var t=Object(y.a)(),s=t.register,c=t.handleSubmit;return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{className:"form",onSubmit:c((function(t){var s,n,c={query:(s=t.email,n=t.password,'mutation { login( email: "'.concat(s,'", passcode: "').concat(n,'") {  success jwtToken refreshToken  User {id name email} } }'))};m.a.post(v,c).then((function(t){if(t.data.errors){var s=t.data.errors[0],n=s.message,c=s.extensions,o=c.code,a=c.errorType;return console.log({message:n}),console.log({code:o}),void console.log({errorType:a})}console.log({response:t});var r=t.data.data.login,i=r.message,l=r.success,j=r.jwtToken,u=r.User;console.log({message:i,success:l}),b.a.set("token",j),b.a.set("user",u),h.login((function(){e.history.push("/dashboard")}))})).catch((function(e){console.log({error:e})}))})),children:[Object(x.jsxs)("label",{children:["email",Object(x.jsx)("input",Object(n.a)({},s("email")))]}),Object(x.jsx)("br",{}),Object(x.jsxs)("label",{children:["password",Object(x.jsx)("input",Object(n.a)({},s("password")))]}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"submit",value:"submit"}),Object(x.jsxs)("p",{children:["Sign up if you don't have an account ",Object(x.jsx)(S.b,{className:"link",to:"/signup",children:"signup"})]})]})})};var w=function(e){console.log("Auth:",h.isAuthenticated());var t=Object(y.a)(),s=t.register,c=t.handleSubmit;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"sign up"}),Object(x.jsx)("p",{children:"Create an account if you don't have one"}),Object(x.jsxs)("form",{className:"form",onSubmit:c((function(t){var s={query:function(e){return'mutation { signUp( email: "'.concat(e.email,'", name: "').concat(e.name,'", passcode: "').concat(e.password,'") {  success jwtToken refreshToken  User {id name email} } }')}(t)};m.a.post(v,s).then((function(t){if(t.data.errors){var s=t.data.errors[0],n=s.message,c=s.extensions,o=c.code,a=c.errorType;console.log({message:n}),console.log({code:o}),console.log({errorType:a})}console.log({response:t});var r=t.data.data.signUp,i=r.success,l=r.jwtToken,j=r.User;console.log(i,l),console.log(j),b.a.set("token",l),b.a.set("user",j),h.login((function(){e.history.push("/dashboard")}))})).catch((function(e){console.log({error:e})}))})),children:[Object(x.jsxs)("label",{children:["name",Object(x.jsx)("input",Object(n.a)({},s("name")))]}),Object(x.jsxs)("label",{children:["email",Object(x.jsx)("input",Object(n.a)({},s("email")))]}),Object(x.jsxs)("label",{children:["password",Object(x.jsx)("input",Object(n.a)({},s("password")))]}),Object(x.jsx)("input",{type:"submit",value:"submit"}),Object(x.jsxs)("p",{children:["Login if you have an account ",Object(x.jsx)(S.b,{className:"link",to:"/",children:"login"})]})]})]})},A=s(63);var C=function(e){var t=e.component,s=Object(A.a)(e,["component"]);return console.log("auth value: ",h.isAuthenticated()),Object(x.jsx)(i.b,Object(n.a)(Object(n.a)({},s),{},{render:function(e){return h.isAuthenticated()?Object(x.jsx)(t,Object(n.a)({},e)):Object(x.jsx)(i.a,{to:{pathname:"/",state:{from:e.location}}})}}))};var D=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("h1",{className:"header",children:"Time Tracker App"}),Object(x.jsxs)(i.d,{children:[Object(x.jsx)(i.b,{exact:!0,path:"/",component:N}),Object(x.jsx)(i.b,{exact:!0,path:"/signup",component:w}),Object(x.jsx)(C,{path:"/dashboard",component:T}),Object(x.jsx)(i.b,{path:"*",component:function(){return"404 NOT FOUND"}})]})]})},I=s(62),U=s(117),q=s(118),R=s(120),E=s(61),B=Object(I.a)({uri:"http://localhost:8080/"}),M=Object(E.a)((function(e,t){var s=t.headers,c=localStorage.getItem("token");return{headers:Object(n.a)(Object(n.a)({},s),{},{authorization:c?"Bearer ".concat(c):""})}})),z=new U.a({link:M.concat(B),cache:new q.a});r.a.render(Object(x.jsx)(R.a,{client:z,children:Object(x.jsx)(S.a,{children:Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(D,{})})})}),document.getElementById("root"))},68:function(e,t,s){}},[[107,1,2]]]);
//# sourceMappingURL=main.9539f5f4.chunk.js.map